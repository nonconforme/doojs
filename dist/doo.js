(function(){"use strict";var a=function(){var a=function(){return"XMLHttpRequest"in window?new XMLHttpRequest:new ActiveXObejct("Microsoft.XML")},b=function(a,c,d){a(c),setTimeout(b,d,a,c,d)},c={cast:"received data have not been typecast to object.",dataNoSend:"You make a post without sending data...",timeError:"timeout interval properties should not be set at the same time",isJSON:"File isn't JSON.",isXML:"File isn't XML."},d=function(b){var d=a();"undefined"!=typeof b.timeout&&"number"==typeof b.timeout&&(d.timout=b.timeout);var e="";"undefined"!=typeof b.data&&(/\?$/.test(b.host)||(e="?"),e+=encodeURIComponent(b.data)),d.open("GET",b.url+e),"undefined"!=typeof b.credential&&(d.withCredentials=!0),"undefined"!=typeof b.type&&(d.overrideMimeType(b.type),d.setRequestHeader("Content-Type",b.type)),d.addEventListener("load",function(){if(this.readyState===this.DONE&&200===this.status){var a;try{a="json"===b.dataType?JSON.parse(d.responseText):"xml"===b.dataType?d.responseXML:d.responseText,b.success(a)}catch(e){return"function"!=typeof b.error?console.error(c.cast):b.error({status:c.cast,url:b.url})}}else if(this.readyState===this.DONE&&200!==this.status)return b.error({status:d.statusText})},!1),d.addEventListener("error",function(a){b.error(a)},!1),d.send(null)},e=function(){var a,b;return function(d){if(("undefined"===d.credential||d.credential!==!0)&&(d.credential=!1),"undefined"!=typeof d.formData)b=new FormData(d.formData);else{if("undefined"===d.data){if("undefined"!=typeof d.error&&"function"==typeof d.error)return d.error({status:c.dataNoSend});throw new Error(c.dataNoSend)}b=new FormData;for(var e in d.data)b.append(e,d.data[e])}a=this.xhr(),"undefined"!==d.timeout&&"number"==typeof d.timeout&&(a.timout=d.timeout),a.open("POST",d.url),"undefined"!==d.credential&&(a.withCredentials=d.credential),"undefined"!==d.type&&(a.overrideMimeType(d.type),a.setRequestHeader("Content-Type",d.type)),a.addEventListener("load",function(){if(this.readyState===this.DONE&&200===this.status)try{d.success(JSON.parse(a.responseText))}catch(b){return console.error(c.cast,b),d.error({status:c.cast})}else if(this.readyState===this.DONE&&200!==this.status)return d.error({code:a.status,statusText:a.statusText,host:d.host})},!1),a.addEventListener("error",function(a){d.error(a)},!1),a.send(b)}},f=function(a,b){return function(a,c){var d=this.xhr();return d.open("GET",a),d.onload=function(){"json"===b?c(JSON.parse(d.responseText)):"xml"===b&&c(d.responseXML)},d.onerror=function(a){c(a)},d.send(null),this}};return function(){this.get=function(a){if(arguments.length>1&&"string"==typeof a&&"function"==typeof arguments[1]){var e=arguments[1],f=this.xhr();return f.open("GET",a),f.onload=function(){try{e(!1,JSON.parse(f.responseText))}catch(a){console.error(c.cast)}},f.onerror=function(a){e({status:a},null)},f.send(null),this}if(("undefined"==typeof a.credential||"boolean"==typeof a.credential)&&(a.credential=!1),"undefined"!=typeof a.interval&&"undefined"!=typeof a.timeout)throw a.error({error:!0,status:c.timeError}),new Error(c.timeError);return"undefined"==typeof a.dataType&&(a.dataType="json"),"undefined"!=typeof a.interval?b(d,a,a.interval):d(a),this},this.getJSON=f(c.isJSON,"json"),this.getXML=f(c.isXML,"xml"),this.post=e()}}();a.prototype.version="0.1.2",a.prototype.xhr=function(){return xhr()},this.doo=new a}).call(this);